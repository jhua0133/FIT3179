{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 600,
    "height": 400,
    "title": "Visitors by Top 5 Countries Over Time",
    "data": {
      "url": "https://raw.githubusercontent.com/jhua0133/FIT3179/refs/heads/HW-week-10/aus_visitors_by_country.csv",
      "format": {"type": "csv"}
    },
    
    "transform": [
      {
        "fold": ["China", "New Zealand", "USA", "UK", "Japan"],
        "as": ["Country", "Visitors"]
      },
      {"filter": {"selection": "CountrySelect"}}
    ],
    "selection": {
      "CountrySelect": {
        "type": "single",
        "fields": ["Country"],
        "bind": {
          "input": "select",
          "options": [null, "China", "New Zealand", "USA", "UK", "Japan"],
          "labels": ["Show All", "China", "New Zealand", "USA", "UK", "Japan"],
          "name": "Select Country: "
        }
      }
    },
      "layer": [
      {
        "mark": "line",
        "encoding": {
          "x": {"field": "Year", "type": "temporal", "axis": {"title": "Year"}},
          "y": {
            "field": "Visitors",
            "type": "quantitative",
            "axis": {"title": "Visitors in Millions"}
          },
          "color": {
            "field": "Country",
            "type": "nominal",
            "legend": {"title": "Country"}
          },
          "tooltip": [
            {"field": "Year", "type": "temporal", "title": "Year"},
            {"field": "Country", "type": "nominal", "title": "Country"},
            {"field": "Visitors", "type": "quantitative", "title": "Visitors"}
        
          ]
        },
        "transform": [
      {
        "fold": ["China", "New Zealand", "USA", "UK", "Japan"],
        "as": ["Country", "Visitors"]
      },
      {"filter": {"selection": "CountrySelect"}}
    ],
    "selection": {
      "CountrySelect": {
        "type": "single",
        "fields": ["Country"],
        "bind": {
          "input": "select",
          "options": [null, "China", "New Zealand", "USA", "UK", "Japan"],
          "labels": ["Show All", "China", "New Zealand", "USA", "UK", "Japan"],
          "name": "Select Country: "
        }
      }
    }
      },
      {
        "mark": {
          "type": "text",
          "align": "left",
          "dx": 15,
          "dy": -15,
          "fontSize": 11,
          "fontStyle": "Italic",
          "color": "darkblue"
        },
        "encoding": {
          "x": {"datum": "2019-01-01", "type": "temporal"},
          "y": {"datum": 1.48, "type": "quantitative"},
          "text": {
            "value": "While other countries have remained relatively stable, China has seen a 368% increase in visitors from 2009 to 2019"
          }
        }
      }
    ]
  }